@using ArandanoIRT.Web._0_Domain.Common
@model ArandanoIRT.Web._1_Application.DTOs.Device.DeviceDetailsDto
@{
    ViewData["Title"] = "Eliminar Dispositivo";
    Layout = "_AdminLayout";
}

@section Styles {
    <link rel="stylesheet" href="~/css/crud-forms.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
}

@if (Model == null)
{
    <div class="alert alert-warning">Dispositivo no encontrado.</div>
    <p><a asp-action="Index" class="btn btn-secondary-outline">Volver al listado</a></p>
}
else
{
    <div class="page-header">
        <h1>@ViewData["Title"]</h1>
    </div>

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger" role="alert">@TempData["ErrorMessage"]</div>
    }

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <form asp-action="Delete">
                <input type="hidden" asp-for="Id" />
                <div class="card delete-confirmation-card">
                    <div class="card-body">
                        <div class="delete-warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>¿Esta absolutamente seguro?</h3>
                            <p class="lead">
                                Esta a punto de eliminar permanentemente el dispositivo:
                                <strong class="item-to-delete">@Model.Name</strong>
                            </p>
                            <p class="text-danger mt-3">
                                <strong>Advertencia:</strong> Esta acción eliminará el dispositivo y <strong>todos</strong> sus datos asociados (activación, logs, datos ambientales y capturas térmicas).
                            </p>
                            <p class="text-muted">Esta acción no se puede deshacer.</p>
                        </div>

                        <hr class="my-4"/>

                        <h5 class="details-title">Se eliminará la siguiente información:</h5>
                        <dl class="row details-list mt-3">
                            <dt class="col-sm-4">Nombre del Dispositivo</dt>
                            <dd class="col-sm-8">@Model.Name</dd>

                            <dt class="col-sm-4">Planta Asignada</dt>
                            <dd class="col-sm-8">@(Model.PlantName ?? "N/A")</dd>

                            <dt class="col-sm-4">Estado Actual</dt>
                            <dd class="col-sm-8">@Model.Status.GetDisplayName()</dd>
                        </dl>
                    </div>
                    <div class="card-footer">
                        <a asp-action="Index" class="btn btn-secondary-outline">No, Cancelar</a>
                        <button type="submit" class="btn btn-danger">
                            <i class="fas fa-trash-alt me-2"></i>Sí, Eliminar Definitivamente
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
}
