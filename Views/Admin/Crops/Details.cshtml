@model ArandanoIRT.Web._1_Application.DTOs.Crops.CropDetailsDto
@{
    ViewData["Title"] = "Detalles del Cultivo";
    Layout = "_AdminLayout";
}

@section Styles {
    <link rel="stylesheet" href="~/css/crud-forms.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
}

@if (Model == null)
{
    <div class="alert alert-warning">Cultivo no encontrado.</div>
    <p><a asp-action="Index" class="btn btn-secondary-outline">Volver al listado</a></p>
}
else
{
    <div class="page-header">
        <h1>@ViewData["Title"]</h1>
        <h4>@Model.Name</h4>
    </div>

    @if (ViewData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger" role="alert">@ViewData["ErrorMessage"]</div>
    }

    <div class="card details-card">
        <div class="card-body">
            <dl class="row details-list">
                <dt class="col-sm-3">@Html.DisplayNameFor(model => model.Name)</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.Name)</dd>

                <dt class="col-sm-3">@Html.DisplayNameFor(model => model.Address)</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.Address)</dd>
                
                <dt class="col-sm-3">@Html.DisplayNameFor(model => model.CityName)</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.CityName)</dd>
                
                <dt class="col-sm-3">@Html.DisplayNameFor(model => model.CreatedAt)</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.CreatedAt)</dd>

                <dt class="col-sm-3">@Html.DisplayNameFor(model => model.UpdatedAt)</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.UpdatedAt)</dd>
            </dl>
            
            <h5 class="section-title mt-4">Parámetros y Umbrales del Cultivo</h5>
            
            <div class="row mt-3">
                <div class="col-lg-4 mb-3">
                    <div class="parameter-card">
                        <h6>Análisis (CWSI)</h6>
                        <dl>
                            <dt>Umbral Incipiente</dt>
                            <dd>@Model.CropSettings.AnalysisParameters.CwsiThresholdIncipient</dd>
                            <dt>Umbral Crítico</dt>
                            <dd>@Model.CropSettings.AnalysisParameters.CwsiThresholdCritical</dd>
                            <dt>Ventana de Análisis</dt>
                            <dd>@Model.CropSettings.AnalysisParameters.AnalysisWindowStartHour:00 - @Model.CropSettings.AnalysisParameters.AnalysisWindowEndHour:00</dd>
                            <dt>Umbral de Luz (lux)</dt>
                            <dd>@Model.CropSettings.AnalysisParameters.LightIntensityThreshold</dd>
                        </dl>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <div class="parameter-card">
                        <h6>Anomalías Nocturnas</h6>
                        <dl>
                            <dt>Umbral Delta T (°C)</dt>
                            <dd>@Model.CropSettings.AnomalyParameters.DeltaTThreshold</dd>
                            <dt>Duración Mínima (min)</dt>
                            <dd>@Model.CropSettings.AnomalyParameters.DurationMinutes</dd>
                        </dl>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <div class="parameter-card">
                        <h6>Calibración</h6>
                        <dl>
                            <dt>Intervalo Recordatorio (meses)</dt>
                            <dd>@Model.CropSettings.CalibrationReminder.ReminderIntervalMonths</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <a asp-action="Index" class="btn btn-secondary-outline">Volver al Listado</a>
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">
                <i class="fas fa-pencil-alt me-2"></i>Editar
            </a>
        </div>
    </div>
}
